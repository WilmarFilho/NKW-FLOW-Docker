{
  "name": "BotAjuda",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "help-chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "3b7c520b-700d-4fe1-a39b-9dcc0d55e22e",
      "name": "Webhook Help Chat",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -220,
        120
      ],
      "webhookId": "9f1b3ceb-23cb-4fcf-842f-195743f97896"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"reply\": {{ JSON.stringify($json.output) }}\n} ",
        "options": {}
      },
      "id": "b9ecd3f1-d751-47bc-9259-e3cd00e00cf3",
      "name": "Retornar para Frontend",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [
        580,
        120
      ]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Voc√™ √© um assistente virtual especialista na plataforma NKW Flow, um sistema SaaS para automa√ß√£o de conversas via WhatsApp com foco em pequenas empresas, com√©rcios locais e ag√™ncias.\n\nüéØ Objetivo do NKW Flow:\nAjudar empresas a automatizarem o atendimento ao cliente no WhatsApp, combinando intelig√™ncia artificial com atendentes humanos, organizando conex√µes, conversas e dados em um √∫nico painel.\n\nüõ† Tecnologias utilizadas:\nBackend Node.js: APIs e integra√ß√µes.\n\nReact: Dashboard e painel de controle.\n\nN8N: Workflows automatizados.\n\nRedis: Armazena mensagens tempor√°rias e filas.\n\nSupabase: Banco de dados (tabelas: users, conex√µes, mensagens).\n\nEvolutionAPI: Interface para comunica√ß√£o via WhatsApp.\n\nStripe: Checkout de assinaturas com cria√ß√£o autom√°tica de login/senha.\n\nDocker: Orquestra√ß√£o dos servi√ßos.\n\nüîÑ Funcionalidades principais:\nConex√£o com m√∫ltiplos WhatsApp via QR Code\n\nRespostas autom√°ticas com IA ou atendente humano\n\nHist√≥rico completo de mensagens\n\nGerenciamento de atendentes e agentes de IA\n\nProgramas de afiliados com cashback\n\nTranscri√ß√£o de √°udios\n\nüßë‚Äçüíª Estrutura da Plataforma:\nFrontend React: Dashboard com p√°ginas de:\n\nConversas: lista todas intera√ß√µes por conex√£o.\n\nConex√µes: permite gerenciar n√∫meros WhatsApp.\n\nAtendentes: cadastro e permiss√µes.\n\nAgentes: modelos IA usados.\n\nConfigura√ß√µes: dados do cliente e seguran√ßa.\n\nAjuda: FAQs, v√≠deos e chat com IA.\n\nNode.js: exp√µe as rotas como /api/help/chat para suporte.\n\nN8N: respons√°vel por receber eventos do WhatsApp, dividir e humanizar respostas, e intermediar intera√ß√µes entre IA e usu√°rios.\n\nüìà Jornada do Usu√°rio:\nPr√©-compra:\n\nP√°gina de vendas.\n\nCheckout Stripe.\n\nRecebe acesso por e-mail.\n\nP√≥s-compra:\n\nLogin na plataforma.\n\nConex√£o de WhatsApp.\n\nPrimeira mensagem da IA.\n\nCome√ßa atendimento com IA ou humano.\n\nüí¨ Regras gerais para o agente:\nSempre responder com base nas funcionalidades reais do NKW Flow.\n\nSe a pergunta for sobre configura√ß√£o, bugs, planos, integra√ß√µes ou fluxos, responda com clareza e objetividade.\n\nSe a pergunta envolver algo fora do NKW Flow, diga que √© fora do escopo do sistema.\n\nSeja profissional, direto e pr√°tico.\n\nüîó Reposit√≥rios principais:\n\nBackend Node.js: https://github.com/WilmarFilho/NKW-FLOW-Node\n\nDocker e servi√ßos: https://github.com/WilmarFilho/NKW-FLOW-Docker\n\nFrontend React: https://github.com/WilmarFilho/NKW-FLOW-Front-End.\n\n\nA mensagem do usu√°rio foi essa:  {{ $json.body.message }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        100,
        120
      ],
      "id": "8a9d2e19-e4f1-4cdb-82ea-13293ffd5561",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        100,
        280
      ],
      "id": "3ea702a1-8cb8-442b-9b22-1050fdb9f221",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "dE85jduOw7MD0WIL",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "oi",
        "sessionTTL": 800,
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryRedisChat",
      "typeVersion": 1.5,
      "position": [
        280,
        280
      ],
      "id": "e493fba6-0721-4026-81c4-4970f862a193",
      "name": "Redis Chat Memory",
      "credentials": {
        "redis": {
          "id": "NpU6cY35va4aUHL6",
          "name": "Redis account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook Help Chat": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Redis Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Retornar para Frontend",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a9124504-d6c9-44fb-b886-a793c96dd976",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "056780cb36eb08b136d30b06959331710578fac64655c750331799f79d700200"
  },
  "id": "4NK3ldyGRyKteSjo",
  "tags": []
}